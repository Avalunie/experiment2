<!doctype html>
<meta charset="utf-8">
<title>Отображение изменения состояния монстра</title>
<canvas width="64" height="64"></canvas>
<script>
var monster =
{
 //Изображение монстра
 image: "monsterStates.png",
 //Состояния монстра
 NORMAL: 0,
 SCARED: 1,
 //Установка начального состояния
 state: 0
};
//Установка холста и поверхности рисования
var canvas = document.querySelector("canvas");
var drawingSurface = canvas.getContext("2d");
//Загрузка изображения монстра
var monsterImage = new Image();
monsterImage.addEventListener("load", render, false);
monsterImage.src = monster.image;
//Смена состояния монстра клавишей
window.addEventListener("keydown", keydownHandler, false);
function keydownHandler(event)
{
 //Смена состояния при нажатии клавиши
 becomeScared();
}
function becomeScared()
{
 monster.state = monster.SCARED;
 setTimeout(becomeNormal, 1000);
 render();
}
function becomeNormal()
{
 monster.state = monster.NORMAL;
render();
}
function render()
{
 drawingSurface.drawImage (monsterImage,
 64 * monster.state, 0, 64, 64,
 0, 0, 64, 64);
}
</script>
